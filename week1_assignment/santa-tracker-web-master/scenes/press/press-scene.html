<!--
Copyright 2015 Google Inc. All rights reserved.

Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at

      http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed
under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the License for the
specific language governing permissions and limitations under the License.
-->
<link rel="import" href="../scene-behavior.html">
<link rel="import" href="press-scene_module.html">

<script src="press-scene.min.js"></script>

<dom-module id="press-scene">
<template>
  <style include="press-scene_module"></style>
  <div id="press-content">

    <div id="press-hero">
      <div class="press-header">
        <div class="press-title">
          <h1>Press</h1>
          <h1>Info</h1>
        </div>
        <h3>About Google Santa Tracker</h3>
      </div>
      <div class="press-description">
        <div class="press-description-left">
          <div class="square"></div>
        </div>
        <div class="press-description-right">
          <p>For 12 years, Google's Santa Tracker has been a fun, educational and interactive way for fans to celebrate the holiday season.</p>
          <p>The experience starts with the opening of Santa's Village on December 1st. As we <a href="https://google.com/santatracker">countdown</a> to Santa's departure, the village unlocks new games and experiences that allow visitors to practice basic coding skills, exercise their geography knowledge, learn different languages and get to know more about charitable educational organizations. <a href$="[[urlFor('educators')]]">Teachers can even download lesson plans</a> to help teach their students about holiday traditions from around the world. </p>
          <p>On December 24, the Tracker goes live allowing Santa fans worldwide to follow his progress on desktop web, mobile web (Android/iOS), <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.santatracker">Android app</a>, <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.santatracker">Android TV app</a> and Chromecast.</p>
        </div>
      </div>
    </div>

    <div id="press-intro">
      <div class="press-intro-col press-intro-left">
        <div class="press-intro-inner">
          <div class="rect"></div>
          <h2>Educational adventures</h2>
          <p>For the first time, we're excited to introduce <a href$="[[urlFor('educators')]]">an educator resource page</a> that easily allow teachers to find educational games and corresponding lesson plans all in one place. From games that introduce basic concepts of coding to global holiday traditions, Google's Santa Tracker encourages holiday learning experiences in a fun way. Explore <a href$="[[urlFor('educators')]]">our educational games</a> to learn more.</p>
        </div>
      </div>
      <div class="press-intro-col press-intro-right">
        <div class="press-intro-inner">
          <div class="rect"></div>
          <h2>What’s new in 2016</h2>
          <ul>
            <li><strong>An even bigger focus on learning.</strong> The elves continue to add educational experiences to Santa Tracker and our new educator resource page makes it really easy to find activities based on subject matter with <a href$="[[urlFor('educators')]]">corresponding lesson plans</a>.</li>
            <li><strong>New Games.</strong> From sliding penguins to dancing elves, the residents of the North Pole are having the time of their lives in anticipation for the big day. See descriptions, images and videos of the newest experiences below.</li>
            <li><strong>Android exclusives.</strong> This year, there are four new games available only on the Android app. Try your hand at the new geolocation game <em>Present Quest</em> and see how many of Santa's misplaced gifts you can recover.</li>
            <li><strong>Santa on hardware.</strong> As we get closer to the big day, you can ask your Pixel device or Google Home "Where is Santa". The answer may surprise you.</li>
            <li><strong>Educational nonprofits.</strong> We've worked with <a href="https://google.org">Google.org</a> to highlight new nonprofits that work tireless year round to improve educational opportunities world wide: Khan Academy, Pratham Books, Libaries without Borders and Code.org. We'll also be supporting Donor's Choose again this year.</li>
          </ul>
        </div>
      </div>
    </div>

    <div id="press-primary">
      <div class="press-primary-inner">
        <h2>Santa’s Village and The Tracker</h2>
        <div class="card">
          <div class="card-img" style="background-image: url(img/tmb-santas-village.png)"></div>
          <div class="card-info">
            <h4>Santa's Village</h4>
            <span>Open all December • Website</span>
            <p>While millions of people eagerly await Dec 24th, Santa and his elves are keeping busy at the North Pole. This year, they’ve realized it's time to study up on geography and coding to ensure Santa’s sleigh goes on the most efficient path around the world using the most advanced algorithms. It’s his biggest night of the year! </p>
            <div class="card-links">
              <span class="card-title">Press resources:</span>
              <a href="https://storage.googleapis.com/mapsdevsite/santa-2015/santa-tracker-village-with-santa.png" class="card-dl" target="_blank">Still screenshot <span>(PNG file)</span></a>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-img" style="background-image: url(img/tmb-santa-tracker.png)"></div>
          <div class="card-info">
            <h4>The Tracker</h4>
            <span>Opens December 24 • Experience</span>
            <p>On his sleigh, arguably the fastest airborne vehicle in the world, Santa whips from city to city. Follow him each step of the way by searching for Santa directly in <a href="https://maps.google.com">Google Maps</a> and <a href="https://google.com">google.com</a>. Or, head over to <a href="https://google.com/santatracker">google.com/santatracker</a> to get the latest updates on his location, play exclusive games only available on the 24th, or dive into Street View of all the cities he’ll visit that night.  </p>
            <div class="card-links">
              <span class="card-title">Press resources:</span>
              <a href="https://storage.googleapis.com/mapsdevsite/santa-2015/santa-tracker-tracker-map.png" class="card-dl" target="_blank">Still screenshot <span>(PNG file)</span></a>
              <a href="https://storage.googleapis.com/mapsdevsite/santa-2015/DEC24-tracker-full.gif" class="card-dl" target="_blank">Animation <span>(GIF file)</span></a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="press-secondary">
      <div class="press-secondary-inner">
        <h2>All the fun and games</h2>
        <div class="press-card-tabs" on-click="_onFilterClick">
          <button class$="[[_computeActive(filter, '')]]" data-filter="">View All</button>
          <button class$="[[_computeActive(filter, 'education')]]" data-filter="education">Education Focused</button>
          <button class$="[[_computeActive(filter, 'android')]]" data-filter="android">Android</button>
          <button class$="[[_computeActive(filter, 'new')]]" data-filter="new">New this year</button>
        </div>

        <div class="press-card-container">
          <template is="dom-repeat" items="[[cards]]" as="card">
            <div class="card" data-locked$="[[card.locked]]" hidden$="[[_computeHidden(filter, card.filter)]]">
              <a href$="[[_computeUnlockedUrlFor(card.key, card.locked)]]">
                <div class="card-img" style$="[[_computeCardBackgroundStyle(card.key)]]">
                  <div class="card-lock">
                    <span class="card-unlock">Unlocks December</span>
                    <span class="card-unlock-day">[[card.opens]]<span>[[_computeOrd(card.opens)]]</span></span>
                  </div>
                </div>
              </a>
              <div class="card-info">
                <h4>[[card.title]]</h4>
                <span>Opens December [[card.opens]] • [[card.type]]</span>
                <p>[[card.description]]</p>
                <div class="card-links">
                  <span class="card-title">Press resources:</span>
                  <div class="card-links-full">
                    <div hidden$="[[card.locked]]">
                      <template is="dom-repeat" items="[[card.resources]]">
                        <a href="[[item.url]]" class$="[[item.class]]" target="_blank">
                          [[item.title]] <span>([[item.type]])</span>
                        </a>
                      </template>
                    </div>
                    <div hidden$="[[!card.locked]]">
                      <a class="card-dl card-locked">
                        <span>Assets available soon</span>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </template>
          <template is="dom-repeat" items="[[androidCards]]" as="card">
            <div class="card" hidden$="[[_computeHidden(filter, 'android')]]">
              <div class="card-img" style$="[[_computeAndroidCardStyle(card.key)]]"></div>
              <div class="card-info">
                <h4>[[card.title]]</h4>
                <span>Santa Tracker App for Android • [[card.type]]</span>
                <p>[[card.description]]</p>
                <div class="card-links" hidden$="[[!card.screenshotUrl]]">
                  <span class="card-title">Press resources:</span>
                  <div class="card-links-full">
                    <a href="[[card.screenshotUrl]]" class$="card-dl" target="_blank">
                      Still Screenshot <span>(PNG file)</span>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </template>
        </div>
      </div>
    </div>

    <div id="press-device">
      <h2>Santa Tracker on your device</h2>
      <p class="press-device-intro">The spirit of the holidays is everywhere, including all your devices!</p>

      <div class="press-device-grid">
        <div class="press-device-square">
          <div class="square" style="background-image: url(img/illust-chromecast_2x.png);"></div>
          <h4>Chromecast</h4>
          <p>Broadcast the adventure to your TV using Chromecast.</p>
          <a href="https://chromecast.com">Learn More</a>
        </div>
        <div class="press-device-square">
          <div class="square" style="background-image: url(img/illust-web-googlehome_2x.png);"></div>
          <h4>New Assistant</h4>
          <p>As we get closer to the big day, ask your Pixel device or Google Home “Where is Santa”. The answer may surprise you.</p>
          <a href="https://assistant.google.com">Learn More</a>
        </div>
        <div class="press-device-square">
          <div class="square" style="background-image: url(img/illust-mobile-app_2x.png);"></div>
          <h4>Mobile app</h4>
          <p>Download the Santa Tracker App for Android on the Play Store.</p>
          <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.santatracker">Learn More</a>
        </div>
        <div class="press-device-square">
          <div class="square" style="background-image: url(img/illust-wear_2x.png);"></div>
          <h4>Android Wear</h4>
          <p>Track Santa from your wrist with Android Wear integration.</p>
          <a href="https://www.android.com/wear/">Learn More</a>
        </div>
        <div class="press-device-square">
          <div class="square" style="background-image: url(img/illust-web-optimized_2x.png);"></div>
          <h4>Mobile optimized</h4>
          <p><a href="https://google.com/santatracker">google.com/santatracker</a> works on laptops, phones, and tablets so you can track Santa on the ho-ho-go.</p>
        </div>
        <div class="press-device-square">
          <div class="square" style="background-image: url(img/illust-google-maps_2x.png);"></div>
          <h4>Google Maps</h4>
          <p>Coming this month, try searching for the North Pole or Santa in Google Maps (Android and iOS) for Santa's current stop.</p>
        </div>
        <div class="press-device-square">
          <div class="square" style="background-image: url(img/illust-google-search_2x.png);"></div>
          <h4>Google Search</h4>
          <p>Search for "Santa" on <a href="https://google.com">google.com</a> to see a countdown to Santa’s round-the-world journey and a holiday-themed results page.</p>
        </div>
        <div class="press-device-square">
          <div class="square" style="background-image: url(img/illust-web-cardboard_2x.png);"></div>
          <h4>Cardboard</h4>
          <p>The season’s fun and games, now also in virtual reality.</p>
          <a href="https://support.google.com/santatracker/answer/4243795?rd=1">Learn More</a>
        </div>
      </div>

    </div>

    <div id="press-footer">
      <h3>Need something?</h3>
      <p>Elves and Googlers are here to help.</p>
      <a href="mailto:press@google.com">press@google.com</a>
    </div>

  </div>
</template>
<script>
  Polymer({
    is: 'press-scene',
    behaviors: [window.SantaSceneBehavior],

    properties: {
      scene: Object,
      cards: Array,
      androidCards: Array,
      filter: {
        type: String,
        value: 'education',
      },
    },

    attached: function() {
      console.info('attached');
    },

    onPreload: function() {
      var images = [
        'img/tmb-santa-tracker.png',
        'img/tmb-santas-village.png',
        'img/bg-press-page-hero.png',
        'img/illust-web-googlehome-2x.png',
        'img/illust-chromecast_2x.png',
        'img/illust-educational_2x.png',
        'img/illust-embed_2x.png',
        'img/illust-mobile-app_2x.png',
        'img/illust-new-in2015_2x.png',
        'img/illust-reporter_2x.png',
        'img/illust-wear_2x.png',
        'img/illust-web-cardboard_2x.png',
        'img/illust-web-optimized_2x.png',
        'img/illust-web-googlehome_2x.png',
        'img/title-bg-swirl_2x.png',
      ];

      // TODO(samthor): This should happen in ready:, but we get onPreload first, so androidCards
      // aren't yet available.
      images.concat([
        'img/app_cityquiz.png',
        'img/app_penguinswim.png',
        'img/app_presentquest.png',
        'img/app_snowball.png',
      ]);

      this.preloadImages(images);
    },

    ready: function() {
      this.scene = new scenes.press.Scene();
      this.androidCards = this.scene.getAndroidModels();
      this.cards = this.scene.getModels(function(key) {
        var locked = santaApp.sceneIsOpen(key) === false;
        if (window.DEV && Math.random() > 0.5) {
          locked = true;
        }
        return locked;
      });
    },

    _computeHidden: function(filter, card) {
      if (!filter) {
        return false;
      }
      var parts = card.split(' ');
      return parts.indexOf(filter) === -1;
    },

    _computeAndroidCardStyle: function(key) {
      var url = this.resolveUrl('img/app_' + key + '.png');
      return 'background-image: url(' + url + ')';
    },

    _onFilterClick: function(ev) {
      var filter = ev.target.dataset['filter'];
      if (filter !== undefined) {
        this.filter = filter;
      }
    },

    _computeActive: function(a, b) {
      return a === b ? 'active' : '';
    },

    _computeOrd: function(n) {
      var off = +n % 10;
      if (off === 1) {
        return 'st';
      } else if (off === 2) {
        return 'nd';
      } else if (off === 3) {
        return 'rd';
      } else {
        return 'th';
      }
    },

    _computeUnlockedUrlFor: function(scene, locked) {
      if (locked) {
        return null;
      }
      return this.urlFor(scene);
    },

    _computeCardBackgroundStyle: function(sceneName) {
      if (sceneName) {
        var url = this.resolveUrl('../../images/scenes/' + sceneName + '_2x.png');
        return 'background-image: url(' + url + ')';
      }
      return null;
    },

  });
</script>
</dom-module>